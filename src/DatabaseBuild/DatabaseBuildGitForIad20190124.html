<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Git for Database Build Process</title>

    <link rel="stylesheet" href="../../lib/reveal.js-3.4.1/css/reveal.css">
    <link rel="stylesheet" href="../../lib/reveal.js-3.4.1/css/theme/black.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="../../lib/reveal.js-3.4.1/lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? '../../lib/reveal.js-3.4.1/css/print/pdf.css' : '../../lib/reveal.js-3.4.1/css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>
<body>

<div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">

        <section>
            <h1>Git</h1>
            <p>for Database Build Process</p>
        </section>

        <section>
            <h2>Assumptions</h2>
            <ul>
                <li>New to Git</li>
                <li>Your Repository is Already in BitBucket</li>
                <li>Database Repository Bias</li>
            </ul>
        </section>

        <section>
            <section>
                <h2>Tools</h2>
            </section>

            <section>
                <h3><a href="https://stash.dimensional.com" target="_blank">BitBucket Server</a></h3>
                <p>Web application integrated with Git</p>
                <p><small><a href="https://stash.dimensional.com" target="_blank">https://stash.dimensional.com</a></small></p>

                <aside class="notes">
                    <ul>
                        <li>Internal GitHub</li>
                    </ul>
                </aside>
            </section>

            <section>
                <h3><a href="https://www.sourcetreeapp.com/" target="_blank">Source Tree</a></h3>
                <p>GUI for Git</p>
                <p><small><a href="https://www.sourcetreeapp.com/" target="_blank">https://www.sourcetreeapp.com</a></small></p>

                <aside class="notes">
                    <ul>
                        <li>Atlassian makes BitBucket and Source Tree</li>
                        <li>Ensure you get the version with Git included</li>
                        <li>Was renamed BitBucket from stash</li>
                    </ul>
                </aside>
            </section>

            <section>
                <h3><a href="http://teamcity.dimensional.com" target="_blank">Team City</a></h3>
                <p>Continuous Integration Server</p>
                <p><small><a href="http://teamcity.dimensional.com" target="_blank">http://teamcity.dimensional.com</a></small></p>


                <aside class="notes">
                    <ul>
                        <li>Build automation</li>
                    </ul>
                </aside>

            </section>

        </section>

        <section>

            <section>
                <h2>Get the Source Code</h2>
                <p>Clone the Repository</p>
            </section>

            <section>
                <p>Repository == Source Control for a Single Project</p>
                <p><small>"repo" for short</small></p>

                <aside class="notes">
                    <ul>
                        <li>Or for a single database.</li>
                    </ul>
                </aside>

            </section>

            <section>
                <img src="../GitAndBitBucket/images/Slide1.PNG" />

                <aside class="notes">
                    <ul>
                        <li>Server repo => database of all commits ever made.</li>
                    </ul>
                </aside>

            </section>

            <section>
                <img src="../GitAndBitBucket/images/Slide2.PNG" />

                <aside class="notes">
                    <ul>
                        <li>Cloning pulls ALL check-ins for all time</li>
                    </ul>
                </aside>

            </section>

            <section>
                <img src="../GitAndBitBucket/images/Slide3.PNG" />

                <aside class="notes">
                    <ul>
                        <li>Check out creates the files.</li>
                    </ul>
                </aside>
            </section>

            <section>

                <img src="../GitAndBitBucket/images/CloneSeqDiag2.png" />

            </section>

            <section>
                [Demo - <a href="https://stash.dimensional.com" target="_blank">Code a Repo</a>]
            </section>

        </section>

        <section>
            <section>
                <h2>Local Build</h2>
                <p>Optional at First</p>
            </section>

            <section>
                <h3>Assumptions</h3>
                <ul>
                    <li>SQL Express Installed Locally</li>
                    <li>You Have Admin to SQL Express</li>
                </ul>
            </section>

            <section>
                <img src="images/SimpleLocal.PNG" />

                <aside class="notes">
                    <ul>
                        <li>Source control is NOT involved for local build.</li>
                    </ul>
                </aside>


            </section>

            <section>
                [Demo - Build Local Database]
            </section>

        </section>

        <section>
            <section>
                <h2>Branching</h2>
                <p>First Class Feature</p>

                <aside class="notes">
                    <ul>
                        <li>Git assumes are you going to branches A LOT</li>
                    </ul>
                </aside>
            </section>

            <section>
                <p>Branching Strategy</p>
                <h3><a href="https://datasift.github.io/gitflow/IntroducingGitFlow.html" target="_blank">GitFlow</a></h3>

                <aside class="notes">
                    <ul>
                        <li>develop branch - integration branch for current development</li>
                        <li>master - closets to code in production</li>
                    </ul>
                </aside>
            </section>

            <section>
                <small>Special Branch</small>
                <h3>master</h3>
                <p>Code that matches production.</p>
            </section>

            <section>
                <small>Special Branch</small>
                <h3>develop</h3>
                <p>Code in development not in production.</p>
            </section>

            <section>
                <h4>Branches on BitBucket</h4>
                <p>origin/[branch names]</p>

                <aside class="notes">
                    <ul>
                        <li>Checking origin branches will make a local copy</li>
                    </ul>
                </aside>

            </section>

            <section>
                <img src="../GitAndBitBucket/images/CheckoutSeqDiag2.png" />
            </section>

            <section>
                [Demo - Switching Branches]
            </section>

        </section>

        <section>
            <section>
                <h2>Making a Change</h2>
                <p>in a branch</p>
            </section>

            <section>
                <p>By Default</p>
                <h3>Branch => Local Repo Only</h3>
            </section>

            <section>
                <p>By Default</p>
                <h3>Commit => Local Repo Only</h3>
            </section>

            <section>
                <h3>Feature Branch</h3>
                <p>Smallest unit of "deployable" functionality.</p>

                <aside class="notes">
                    <ul>
                        <li>Smaller the feature the easier it is to manage.</li>
                        <li>Many teams start with Jira ticket number.</li>
                    </ul>
                </aside>

            </section>

            <section>
                <h3>Feature Branch Name</h3>
                <p>feature/[change name]</p>
            </section>

            <section>
                <h3>Add Database Change Scripts</h3>
            </section>
            
            <section>
                <h4>Database State Transitions</h4>
                <img src="images/ScriptTransition.png" />

                <aside class="notes">
                    <ul>
                        <li>This is NOT done by object.</li>
                        <li>Even data updates / corrects go into the change scripts.</li>
                    </ul>
                </aside>

            </section>

            <section>
                <h3>Up</h3>
                <p>folder contains the Transition Scripts</p>

                <aside class="notes">
                    <ul>
                        <li>There are other types of folders that I will not cover right now.</li>
                    </ul>
                </aside>


            </section>

            <section>
                [Demo - Making a Change]

                <aside class="notes">
                    <ul>
                        <li>Source tree is looking at the .Git folders</li>
                        <li>If deleted folder source tree would become unstable.</li>
                    </ul>
                </aside>

            </section>

        </section>

        <section>

            <section>
                <h2>Synchronizing the Repo</h2>
            </section>

            <section>
                <h4>Change is only local</h4>
                <img src="../GitAndBitBucket/images/Slide3.PNG" />
            </section>

            <section>
                <h4>Push</h4>
                <img src="../GitAndBitBucket/images/PushSeqDiag2.png" />
            </section>

            <section>
                <h4>Pull (Get Latest)</h4>
                <img src="../GitAndBitBucket/images/PullSeqDiag2.png" />
            </section>

            <section>
                [Demo - Pull and Push]
            </section>

        </section>

        <section>
            <section>
                <h2>Did it Work?</h2>
                <p>Team City</p>
            </section>

            <section>
                <img src="images/SimpleLocal.PNG" />
            </section>

            <section>
                <img src="images/TeamCityFeatureBranch.PNG" />
            </section>

            <section>
                [Demo - <a href="http://teamcity.dimensional.com" target="_blank">Team City</a>]
            </section>
        </section>

        <section>
            <section>
                <h2>Pull Request</h2>
            </section>

            <section>
                <p>A request for review by peers / DBA Team.</p>
                <p><small>Once a pull request is sent, interested parties can review the set of changes, discuss potential modifications, and even push follow-up commits if necessary. -- github</small></p>
            </section>

            <section>
                <p>Goal to Merge</p>
                <h4>feature branch => develop branch</h4>
            </section>

            <section>
                [Demo - <a href="https://stash.dimensional.com/projects/ID/repos/characteristic-database/browse" target="_blank">Create Pull Request</a>]
            </section>

        </section>

        <section>
            <h2>Did Not Cover</h2>
            <ul>
                <li>Roundhouse in Detail</li>
                <li>Merging to Master</li>
                <li>Changing Non-Tables</li>
                <li>Automated Deployment</li>
                <li>Merge Conflicts</li>
            </ul>
        </section>

        <section>
            <h2>Git Training</h2>
            <ul>
                <li><a href="https://app.pluralsight.com/library/courses/git-fundamentals/table-of-contents" target="_blank">Git Fundamentals</a></li>
                <li><a href="https://app.pluralsight.com/library/courses/using-gitflow/table-of-contents" target="_blank">Using GitFlow</a></li>
                <li><a href="https://vimeo.com/281849797/25104b6f05" target="_blank">Git Daily Use (Dimensional)</a></li>
            </ul>
        </section>

        <section>
            <h4><a href="https://vimeo.com/271516579/f9cf225715" target="_blank">Database Build Process (Dimensional)</a></h4>
        </section>

    </div>

</div>

<script src="../../lib/reveal.js-3.4.1/lib/js/head.min.js"></script>
<script src="../../lib/reveal.js-3.4.1/js/reveal.js"></script>

<script>
    // More info https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        history: true,

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [
            {src: '../../lib/reveal.js-3.4.1/plugin/markdown/marked.js'},
            {src: '../../lib/reveal.js-3.4.1/plugin/markdown/markdown.js'},
            {src: '../../lib/reveal.js-3.4.1/plugin/notes/notes.js', async: true},
            {
                src: '../../lib/reveal.js-3.4.1/plugin/highlight/highlight.js', async: true, callback: function () {
                hljs.initHighlightingOnLoad();
            }
            }
        ]
    });
</script>
</body>
</html>

